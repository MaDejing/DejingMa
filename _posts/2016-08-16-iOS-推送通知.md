---
layout: post
title: iOS 推送通知
---

<p class="subTitle">通知类型</p>
iOS中提供了2种推送通知
1. 本地推送通知(Local Notification)
2. 远程推送通知(Remote Notification)
<br />
<br />
<p class="subTitle">背景介绍</p>
<p class="listRowTitle">&middot; Push</p>
![]({{ site.baseurl}}/public/images/push/push01.png)
**Provider**: 为指定iOS设备应用程序提供Push的服务器。

**APNs**: Apple Push Notification Service(苹果消息推送服务器)。

**Devices**: iOS设备，用来接收APNs下发下来的消息。

**Client App**: iOS设备上的应用程序，用来接收APNs下发的消息到指定的一个客户端App(消息的最终响应者)。

<p class="listRowTitle">&middot; 获取DeviceToken流程</p>
![]({{ site.baseurl}}/public/images/push/push02.png)
<ol>
    <li>向APNs（Apple Push Notification Services）发送设备的<font class="specialText">UDID</font>和<font class="specialText">Bundle Identifier</font>，创建Push SSL Certification(推送证书);</li>
    <li>经APNs加密生成一个<font class="specialText">DeviceToken</font>（官方解释DeviceToken：an opaque identifier assigned to a specific app on a specific device）;</li>
    <li>客户端获取<font class="specialText">DeviceToken</font>;</li>
    <li>将DeviceToken发送给Provider（理解为服务器）。</li>
</ol>

<p class="listRowTitle">&middot; 消息推送流程</p>
![]({{ site.baseurl}}/public/images/push/push03.png)

<p class="subTitle">证书配置</p>
<ol>
    <li>用付费帐号登录到[苹果开发者中心](https://developer.apple.com/membercenter/index.action)。</li>
    <li>根据需求选择<i><u>Apple Push Notification service SSL <font class="specialText">(Sandbox)</font></u></i> 或者 <i><u>Apple Push Notification service SSL <font class="specialText">(Sandbox & Production)</font></u></i>类型的证书。
        <p class="indentText">- 一个用Development Provisioning Profile签名的App生成的 Device Token只能和Sandbox APNS Server结合使用(<u>开发环境测试</u>用)。</p>
        <p class="indentText">- 一个用AdHoc Provisioning Profile或者AppStore Provisioning Profile签名的App生成的Device Token只能和Production APNS Server结合使用(<u>生产环境App Store发布</u>使用)。</p>
    </li>
    <li>创建一个App ID
        <p class="indentText">- 创建过程中Description可以任意填写；</p>
        <p class="indentText">- Bundle Identifier一般用com.company.AppName这样的格式，例如com.mycompany.demo。</p>
        <blockquote>
            <b>Note</b>: 要用push功能的Bundle Identifier一定不能出现通配符，比如com.mycompany.*，这样的名字是不能使用push的。
        </blockquote>
    </li>
</ol>


